import{Q as n}from"./QInput-BDNAaxC0.js";import{u as q,Q as C,C as y,f as T}from"./ContainerComp-C7yH_4w3.js";import{Q as x}from"./QCard-CLlv0FZq.js";import{Q as b,a as m}from"./QItem-BAOqY1tr.js";import{u as B,X as N,r as S,e as i,k as u,q as a,h as t,g as r,f as w,B as D,Q as p,F as U,z as I,y as f,A}from"./index-CRNOgkmO.js";import{Q as L}from"./QList-p4U26OMY.js";import{Q as E}from"./QPage-B_agwJhT.js";import"./use-id-DnXjlq6Y.js";import"./use-timeout-B8pxcGeS.js";import"./use-dark-Bqd9iKvg.js";import"./private.use-form-BlE0dQ4_.js";import"./QBtnDropdown-i8-R6mbe.js";import"./QBtnGroup-JpcjA7Ib.js";import"./QTooltip-C1ynDvHf.js";import"./use-fullscreen-CWzZErIK.js";const F={class:"q-mt-md"},P={class:"text-center text-primary"},z={class:"q-mt-md"},le={__name:"TodoNewPage",setup(M){const V=B(),Q=q(),o=N({title:"",description:"",content:""}),s=S([]),k=()=>{s.value.push({id:Date.now()+Math.random().toString(36).substring(2,9),title:"",completed:!1})},g=d=>{s.value.splice(d,1)},_=d=>{if(d&&d.preventDefault(),!o.title.trim()){alert("請輸入待辦標題");return}const e=s.value.filter(l=>l.title.trim()!=="").map(l=>({id:l.id,title:l.title,completed:!1}));Q.value.unshift({...o,createdAt:Date.now(),updatedAt:T(Date.now()),completed:!1,subTasks:e}),V.push("/site/todo"),o.title="",o.description="",o.content="",s.value=[]};return(d,e)=>(i(),u(E,{padding:""},{default:a(()=>[t(y,null,{default:a(()=>[e[7]||(e[7]=r("h3",null,"新的待辦事項",-1)),r("form",{onSubmit:_},[t(n,{class:"q-mt-sm",outlined:"",modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.title=l),label:"標題"},null,8,["modelValue"]),t(n,{class:"q-mt-sm",outlined:"",modelValue:o.description,"onUpdate:modelValue":e[1]||(e[1]=l=>o.description=l),label:"描述",dense:""},null,8,["modelValue"]),t(x,{flat:"",bordered:"",class:"q-mt-sm"},{default:a(()=>[t(C,{modelValue:o.content,"onUpdate:modelValue":e[2]||(e[2]=l=>o.content=l),"min-height":"5rem"},null,8,["modelValue"])]),_:1}),r("div",F,[e[4]||(e[4]=r("div",{class:"text-subtitle1 q-mb-sm"},"子任務",-1)),t(L,{bordered:"",separator:"",class:"rounded-borders"},{default:a(()=>[(i(!0),w(U,null,D(s.value,(l,c)=>(i(),u(b,{key:c},{default:a(()=>[t(m,null,{default:a(()=>[t(n,{dense:"",outlined:"",modelValue:l.title,"onUpdate:modelValue":v=>l.title=v,label:"子任務標題"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(m,{side:""},{default:a(()=>[t(p,{flat:"",round:"",color:"negative",icon:"delete",onClick:v=>g(c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s.value.length<10?(i(),u(b,{key:0,clickable:"",onClick:k},{default:a(()=>[t(m,null,{default:a(()=>[r("div",P,[t(I,{name:"add"}),e[3]||(e[3]=f(" 添加子任務 "))])]),_:1})]),_:1})):A("",!0)]),_:1})]),r("div",z,[t(p,{color:"grey",to:"/site/todo",type:"reset"},{default:a(()=>e[5]||(e[5]=[f("取消")])),_:1}),t(p,{class:"q-ml-sm",color:"positive",type:"submit"},{default:a(()=>e[6]||(e[6]=[f("創建")])),_:1})])],32)]),_:1})]),_:1}))}};export{le as default};
