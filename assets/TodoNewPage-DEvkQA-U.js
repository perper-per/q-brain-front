import{Q as n}from"./QInput-DjZfRx6W.js";import{u as C,Q as T,C as q,f as x}from"./ContainerComp-_58ymU1C.js";import{Q as y}from"./QCard-BOHZoSRF.js";import{Q as b,a as m}from"./QItem-1HTke1uZ.js";import{u as N,T as S,r as w,d as i,j as u,p as a,g as t,f as r,e as B,A as D,Q as p,F as U,y as I,x as f,z as A}from"./index-CVI_ghTT.js";import{Q as L}from"./QList-B8GCVOVU.js";import{Q as E}from"./QPage-ccugl6uf.js";import"./use-id-cPFTkJUJ.js";import"./use-timeout-BCpyF850.js";import"./use-dark-nNyfjaV2.js";import"./private.use-form-B-gOgvtK.js";import"./QBtnDropdown-BodxyyfP.js";import"./QBtnGroup-CddDStUe.js";import"./QTooltip-DPVOM0lP.js";import"./use-fullscreen-wgc9STpk.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"q-mt-md"},P={class:"text-center text-primary"},j={class:"q-mt-md"},oe={__name:"TodoNewPage",setup(z){const V=N(),Q=C(),o=S({title:"",description:"",content:""}),s=w([]),k=()=>{s.value.push({id:Date.now()+Math.random().toString(36).substring(2,9),title:"",completed:!1})},g=d=>{s.value.splice(d,1)},_=d=>{if(d&&d.preventDefault(),!o.title.trim()){alert("請輸入待辦標題");return}const e=s.value.filter(l=>l.title.trim()!=="").map(l=>({id:l.id,title:l.title,completed:!1}));Q.value.unshift({...o,createdAt:Date.now(),updatedAt:x(Date.now()),completed:!1,subTasks:e}),V.push("/site/todo"),o.title="",o.description="",o.content="",s.value=[]};return(d,e)=>(i(),u(E,{padding:""},{default:a(()=>[t(q,null,{default:a(()=>[e[7]||(e[7]=r("h3",null,"新的待辦事項",-1)),r("form",{onSubmit:_},[t(n,{class:"q-mt-sm",outlined:"",modelValue:o.title,"onUpdate:modelValue":e[0]||(e[0]=l=>o.title=l),label:"標題"},null,8,["modelValue"]),t(n,{class:"q-mt-sm",outlined:"",modelValue:o.description,"onUpdate:modelValue":e[1]||(e[1]=l=>o.description=l),label:"描述",dense:""},null,8,["modelValue"]),t(y,{flat:"",bordered:"",class:"q-mt-sm"},{default:a(()=>[t(T,{modelValue:o.content,"onUpdate:modelValue":e[2]||(e[2]=l=>o.content=l),"min-height":"5rem"},null,8,["modelValue"])]),_:1}),r("div",F,[e[4]||(e[4]=r("div",{class:"text-subtitle1 q-mb-sm"},"子任務",-1)),t(L,{bordered:"",separator:"",class:"rounded-borders"},{default:a(()=>[(i(!0),B(U,null,D(s.value,(l,c)=>(i(),u(b,{key:c},{default:a(()=>[t(m,null,{default:a(()=>[t(n,{dense:"",outlined:"",modelValue:l.title,"onUpdate:modelValue":v=>l.title=v,label:"子任務標題"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(m,{side:""},{default:a(()=>[t(p,{flat:"",round:"",color:"negative",icon:"delete",onClick:v=>g(c)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),s.value.length<10?(i(),u(b,{key:0,clickable:"",onClick:k},{default:a(()=>[t(m,null,{default:a(()=>[r("div",P,[t(I,{name:"add"}),e[3]||(e[3]=f(" 添加子任務 "))])]),_:1})]),_:1})):A("",!0)]),_:1})]),r("div",j,[t(p,{color:"grey",to:"/site/todo",type:"reset"},{default:a(()=>e[5]||(e[5]=[f("取消")])),_:1}),t(p,{class:"q-ml-sm",color:"positive",type:"submit"},{default:a(()=>e[6]||(e[6]=[f("創建")])),_:1})])],32)]),_:1})]),_:1}))}};export{oe as default};
